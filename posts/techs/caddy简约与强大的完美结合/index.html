<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Caddy,简约与强大的完美结合 | 木木的小站</title><meta name=keywords content="Daily,Life"><meta name=description content="你是否曾为 Nginx 或 Apache 的复杂配置而头疼？是否曾为了配置一个 SSL 证书、处理 HTTPS 跳转而耗费数小时？如果你对这些问题感同身受，那么是时候了解一下 Caddy 了——一个为现代互联网而生的 Web 服务器。"><meta name=author content="木木"><link rel=canonical href=https://blog.l50.top/posts/techs/caddy%E7%AE%80%E7%BA%A6%E4%B8%8E%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%AE%8C%E7%BE%8E%E7%BB%93%E5%90%88/><link crossorigin=anonymous href=/assets/css/stylesheet.df5db4ca3946e8b04db5040071c06bd5e5d3f363cc7c428025dd0248738abda7.css integrity="sha256-3120yjlG6LBNtQQAccBr1eXT82PMfEKAJd0CSHOKvac=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.l50.top/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.l50.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.l50.top/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.l50.top/apple-touch-icon.png><link rel=mask-icon href=https://blog.l50.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.l50.top/posts/techs/caddy%E7%AE%80%E7%BA%A6%E4%B8%8E%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%AE%8C%E7%BE%8E%E7%BB%93%E5%90%88/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.l50.top/posts/techs/caddy%E7%AE%80%E7%BA%A6%E4%B8%8E%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%AE%8C%E7%BE%8E%E7%BB%93%E5%90%88/"><meta property="og:site_name" content="木木的小站"><meta property="og:title" content="Caddy,简约与强大的完美结合"><meta property="og:description" content="你是否曾为 Nginx 或 Apache 的复杂配置而头疼？是否曾为了配置一个 SSL 证书、处理 HTTPS 跳转而耗费数小时？如果你对这些问题感同身受，那么是时候了解一下 Caddy 了——一个为现代互联网而生的 Web 服务器。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-25T21:15:53+08:00"><meta property="article:modified_time" content="2025-06-25T21:15:53+08:00"><meta property="article:tag" content="Daily"><meta property="article:tag" content="Life"><meta property="og:image" content="https://blog.l50.top/img/Pictures/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.l50.top/img/Pictures/"><meta name=twitter:title content="Caddy,简约与强大的完美结合"><meta name=twitter:description content="你是否曾为 Nginx 或 Apache 的复杂配置而头疼？是否曾为了配置一个 SSL 证书、处理 HTTPS 跳转而耗费数小时？如果你对这些问题感同身受，那么是时候了解一下 Caddy 了——一个为现代互联网而生的 Web 服务器。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.l50.top/posts/"},{"@type":"ListItem","position":2,"name":"🖥️techs","item":"https://blog.l50.top/posts/techs/"},{"@type":"ListItem","position":3,"name":"Caddy,简约与强大的完美结合","item":"https://blog.l50.top/posts/techs/caddy%E7%AE%80%E7%BA%A6%E4%B8%8E%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%AE%8C%E7%BE%8E%E7%BB%93%E5%90%88/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Caddy,简约与强大的完美结合","name":"Caddy,简约与强大的完美结合","description":"你是否曾为 Nginx 或 Apache 的复杂配置而头疼？是否曾为了配置一个 SSL 证书、处理 HTTPS 跳转而耗费数小时？如果你对这些问题感同身受，那么是时候了解一下 Caddy 了——一个为现代互联网而生的 Web 服务器。\n","keywords":["Daily","Life"],"articleBody":"你是否曾为 Nginx 或 Apache 的复杂配置而头疼？是否曾为了配置一个 SSL 证书、处理 HTTPS 跳转而耗费数小时？如果你对这些问题感同身受，那么是时候了解一下 Caddy 了——一个为现代互联网而生的 Web 服务器。\nCaddy 是一个用 Go 语言编写的开源 Web 服务器，它的设计哲学与传统服务器截然不同：默认安全、配置简单、自动高效。它不仅仅是一个工具，更是一种全新的运维体验。\n为何选择 Caddy？核心优势一览 在众多 Web 服务器中，Caddy 凭借其独特的优势脱颖而出，尤其适合开发者、运维人员和技术爱好者。\n全自动 HTTPS (Automatic HTTPS) 这是 Caddy 最具革命性的功能。你无需了解 Certbot、acme.sh 或手动申请证书的任何繁琐流程。只要在 Caddyfile 中提供一个域名，Caddy 就会： 自动从 Let’s Encrypt 或 ZeroSSL 申请 SSL 证书。 自动续签证书，让你一劳永逸。 自动将所有 HTTP 请求重定向到 HTTPS。 这一切都是开箱即用的，无需任何额外配置。 极致简洁的 Caddyfile 配置 告别 Nginx 中层层嵌套、语法复杂的 .conf 文件。Caddy 的配置文件（Caddyfile）设计得极其人性化，易于读写。一个常见的 PHP 网站配置，在 Nginx 中可能需要几十行，而在 Caddy 中可能只需要几行。 默认即安全 (Secure by Default) Caddy 遵循“明智的默认值 (Sane Defaults)”原则。它默认启用最新的 TLS 1.3 协议，使用安全的加密套件，自动启用 HSTS 策略，并默认阻止对 .git 等隐藏文件的访问。你无需成为安全专家，就能获得一个高安全性的站点。 原生支持 HTTP/3 Caddy 原生支持最新的 HTTP/3 协议（基于 QUIC），可以显著减少延迟，提升移动网络和不稳定网络下的访问速度。 Go 语言编写，单文件部署 Caddy 是一个编译好的、无任何依赖的二进制文件。部署它就像复制一个文件一样简单，非常适合 Docker、Kubernetes 等容器化环境。 通用且功能丰富的 Caddyfile 模板 为了让您快速上手，我准备了一份功能丰富的 Caddyfile 配置模板。它几乎涵盖了个人博客、企业官网、API 服务等场景所需的大部分功能，包括：安全头、性能优化、反向代理、日志轮转等。\n您可以将此作为您项目的起点，按需修改。\n`# ————————————————–\n通用且功能丰富的 Caddyfile 模板 最后更新: 2025-06-25 ————————————————– 全局配置块 (Global Options Block) { # 默认的日志格式 log { format console level INFO }\n# 开启 OCSP Stapling 缓存，提升 TLS 握手性能 ocsp_stapling }\n————————————————– 站点一: yourdomain.com (主站点/静态网站/PHP网站) ————————————————– yourdomain.com, www.yourdomain.com {\n# --- 基础配置 --- # 网站根目录 root * /srv/www.yourdomain.com/public # 自动将 www.yourdomain.com 重定向到 yourdomain.com @www host www.yourdomain.com redir @www https://yourdomain.com{uri} # --- 性能优化 --- # 启用 Gzip 和 Zstd 压缩 encode zstd gzip # 浏览器缓存控制 (Cache-Control) @multimedia path *.jpg *.jpeg *.png *.gif *.svg *.webp *.mp4 header @multimedia Cache-Control \"public, max-age=2592000, immutable\" @static path *.css *.js header @static Cache-Control \"public, max-age=604800\" # --- PHP-FPM 配置 (如果是 PHP 网站，取消此行注释) --- # php_fastcgi unix//run/php/php8.3-fpm.sock # --- 文件服务 --- file_server { hide .env .git .user.ini } # --- 安全增强 --- header { Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" X-Frame-Options \"SAMEORIGIN\" X-XSS-Protection \"1; mode=block\" X-Content-Type-Options \"nosniff\" # Content-Security-Policy \"default-src 'self';\" # 根据需要配置 -Server } # --- 速率限制 (防止暴力破解) --- @login { path /login method POST } rate_limit @login { window 10s burst 5 } # --- 自定义错误页面 --- handle_errors { rewrite * /error-pages/{http.error.status_code}.html file_server } # --- 日志记录 --- log { output file /var/log/caddy/yourdomain.com.access.log { roll_size 10mb roll_keep 5 roll_keep_for 720h } } }\n————————————————– 站点二: api.yourdomain.com (反向代理) ————————————————– api.yourdomain.com { reverse_proxy localhost:8081 { lb_policy least_conn health_uri /health health_interval 10s } }\n————————————————– 站点三: old-domain.com (域名重定向) ————————————————– old-domain.com, www.old-domain.com { redir https://yourdomain.com{uri} permanent }`\n如何开始使用？ 安装 Caddy: 访问 Caddy 的官方下载页面，根据您的操作系统选择最简单的方式安装。\n创建 Caddyfile: 将上面的模板保存为一个名为 Caddyfile 的纯文本文件，并根据您的需求进行修改。\n运行 Caddy（配置在/etc/Caddy)\nBash\n1 caddy run 如果您想让它在后台持续运行，可以使用：\nBash\n1 caddy start Caddy 会立即开始工作，为您的域名提供服务并自动处理 HTTPS。\nCaddy 的管理命令主要通过其命令行界面（CLI）进行操作，涵盖了从启动到停止、配置验证以及版本查看等多个方面。\nCaddy 常用管理命令概览 启动 Caddy: caddy run: 在前台运行，常用于开发和调试。 caddy start: 在后台作为守护进程启动，适用于生产环境。 caddy reload: 无需停机即可重新加载配置文件，使更改生效。 停止 Caddy: caddy stop: 停止当前运行的 Caddy 进程。 配置管理: caddy validate --config /path/to/Caddyfile: 检查配置文件的语法是否正确。 caddy adapt --config /path/to/Caddyfile --pretty: 将 Caddyfile 转换为易读的 JSON 格式配置。 信息查询: caddy version: 显示 Caddy 的版本信息。 caddy help: 获取整体帮助信息。 caddy help : 获取特定命令的帮助信息。 服务管理 (Systemd): 在生产环境中，通常会结合 Systemd 等服务管理工具来控制 Caddy 服务。常用命令包括： sudo systemctl start caddy: 启动服务。 sudo systemctl stop caddy: 停止服务。 sudo systemctl restart caddy: 重启服务。 sudo systemctl reload caddy: 重新加载配置。 sudo systemctl enable caddy: 设置开机自启动。 sudo systemctl status caddy: 查看服务状态。 掌握这些命令能让你高效地管理 Caddy 服务器，无论是用于开发测试还是在生产环境中稳定运行。\n总结 Caddy 以其颠覆性的设计理念，正在改变我们对 Web 服务器的认知。它将曾经繁琐的配置工作，变成了一种简单而愉悦的体验。无论您是想托管一个个人博客，还是部署复杂的微服务架构，Caddy 都是一个值得您认真考虑的、强大而现代的选择。\n给它一个机会，我相信你会爱上它的。\n","wordCount":"1799","inLanguage":"en","image":"https://blog.l50.top/img/Pictures/","datePublished":"2025-06-25T21:15:53+08:00","dateModified":"2025-06-25T21:15:53+08:00","author":[{"@type":"Person","name":"木木"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.l50.top/posts/techs/caddy%E7%AE%80%E7%BA%A6%E4%B8%8E%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%AE%8C%E7%BE%8E%E7%BB%93%E5%90%88/"},"publisher":{"@type":"Organization","name":"木木的小站","logo":{"@type":"ImageObject","url":"https://blog.l50.top/img/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.l50.top/ accesskey=h title="木木的小站 (Alt + H)"><img src=https://blog.l50.top/img/favicon.ico alt aria-label=logo height=50>木木的小站</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.l50.top/archives title=⏳Archive><span>⏳Archive</span></a></li><li><a href=https://blog.l50.top/search title="🔍Search (Alt + /)" accesskey=/><span>🔍Search</span></a></li><li><a href=https://blog.l50.top/about title=🗈About><span>🗈About</span></a></li><li><a href=https://blog.l50.top/tags title=🕮Tags><span>🕮Tags</span></a></li><li><a href=https://blog.l50.top/categories title=📓Categories><span>📓Categories</span></a></li><li><a href=mailto:mumu@l50.top title="✉️Contact Via Email"><span>✉️Contact Via Email</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.l50.top/>Home</a>&nbsp;»&nbsp;<a href=https://blog.l50.top/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://blog.l50.top/posts/techs/>🖥️techs</a></div><h1 class="post-title entry-hint-parent">Caddy,简约与强大的完美结合</h1><div class=post-meta><span title='2025-06-25 21:15:53 +0800 +08'>2025-06-25</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;木木</div></header><figure class=entry-cover><img loading=eager src=https://blog.l50.top/img/Pictures/ alt></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><ul><li><a href=#%e4%b8%ba%e4%bd%95%e9%80%89%e6%8b%a9-caddy%e6%a0%b8%e5%bf%83%e4%bc%98%e5%8a%bf%e4%b8%80%e8%a7%88 aria-label="为何选择 Caddy？核心优势一览">为何选择 Caddy？核心优势一览</a></li><li><a href=#%e9%80%9a%e7%94%a8%e4%b8%94%e5%8a%9f%e8%83%bd%e4%b8%b0%e5%af%8c%e7%9a%84-caddyfile-%e6%a8%a1%e6%9d%bf aria-label="通用且功能丰富的 Caddyfile 模板">通用且功能丰富的 Caddyfile 模板</a></li></ul></ul><li><a href=#%e9%80%9a%e7%94%a8%e4%b8%94%e5%8a%9f%e8%83%bd%e4%b8%b0%e5%af%8c%e7%9a%84-caddyfile-%e6%a8%a1%e6%9d%bf-1 aria-label="通用且功能丰富的 Caddyfile 模板">通用且功能丰富的 Caddyfile 模板</a></li><li><a href=#%e6%9c%80%e5%90%8e%e6%9b%b4%e6%96%b0-2025-06-25 aria-label="最后更新: 2025-06-25">最后更新: 2025-06-25</a></li><li><a href=#heading aria-label=&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a></li><li><a href=#%e5%85%a8%e5%b1%80%e9%85%8d%e7%bd%ae%e5%9d%97-global-options-block aria-label="全局配置块 (Global Options Block)">全局配置块 (Global Options Block)</a></li><li><a href=#heading-1 aria-label=&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a></li><li><a href=#%e7%ab%99%e7%82%b9%e4%b8%80-yourdomaincom-%e4%b8%bb%e7%ab%99%e7%82%b9%e9%9d%99%e6%80%81%e7%bd%91%e7%ab%99php%e7%bd%91%e7%ab%99 aria-label="站点一: yourdomain.com (主站点/静态网站/PHP网站)">站点一: yourdomain.com (主站点/静态网站/PHP网站)</a></li><li><a href=#heading-2 aria-label=&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a></li><li><a href=#heading-3 aria-label=&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a></li><li><a href=#%e7%ab%99%e7%82%b9%e4%ba%8c-apiyourdomaincom-%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86 aria-label="站点二: api.yourdomain.com (反向代理)">站点二: api.yourdomain.com (反向代理)</a></li><li><a href=#heading-4 aria-label=&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a></li><li><a href=#heading-5 aria-label=&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a></li><li><a href=#%e7%ab%99%e7%82%b9%e4%b8%89-old-domaincom-%e5%9f%9f%e5%90%8d%e9%87%8d%e5%ae%9a%e5%90%91 aria-label="站点三: old-domain.com (域名重定向)">站点三: old-domain.com (域名重定向)</a></li><li><a href=#heading-6 aria-label=&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a><ul><ul><li><a href=#%e5%a6%82%e4%bd%95%e5%bc%80%e5%a7%8b%e4%bd%bf%e7%94%a8 aria-label=如何开始使用？>如何开始使用？</a></li><li><a href=#caddy-%e5%b8%b8%e7%94%a8%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4%e6%a6%82%e8%a7%88 aria-label="Caddy 常用管理命令概览">Caddy 常用管理命令概览</a></li><li><a href=#%e6%80%bb%e7%bb%93 aria-label=总结>总结</a></li></ul></ul></li></ul></div></details></div><div class=post-content><p>你是否曾为 Nginx 或 Apache 的复杂配置而头疼？是否曾为了配置一个 SSL 证书、处理 HTTPS 跳转而耗费数小时？如果你对这些问题感同身受，那么是时候了解一下 Caddy 了——一个为现代互联网而生的 Web 服务器。</p><p>Caddy 是一个用 Go 语言编写的开源 Web 服务器，它的设计哲学与传统服务器截然不同：<strong>默认安全、配置简单、自动高效</strong>。它不仅仅是一个工具，更是一种全新的运维体验。</p><h3 id=为何选择-caddy核心优势一览>为何选择 Caddy？核心优势一览<a hidden class=anchor aria-hidden=true href=#为何选择-caddy核心优势一览>#</a></h3><p>在众多 Web 服务器中，Caddy 凭借其独特的优势脱颖而出，尤其适合开发者、运维人员和技术爱好者。</p><ol><li><strong>全自动 HTTPS (Automatic HTTPS)</strong> 这是 Caddy 最具革命性的功能。你无需了解 Certbot、acme.sh 或手动申请证书的任何繁琐流程。只要在 Caddyfile 中提供一个域名，Caddy 就会：<ul><li>自动从 Let&rsquo;s Encrypt 或 ZeroSSL 申请 SSL 证书。</li><li>自动续签证书，让你一劳永逸。</li><li>自动将所有 HTTP 请求重定向到 HTTPS。 这一切都是<strong>开箱即用</strong>的，无需任何额外配置。</li></ul></li><li><strong>极致简洁的 Caddyfile 配置</strong> 告别 Nginx 中层层嵌套、语法复杂的 <code>.conf</code> 文件。Caddy 的配置文件（Caddyfile）设计得极其人性化，易于读写。一个常见的 PHP 网站配置，在 Nginx 中可能需要几十行，而在 Caddy 中可能只需要几行。</li><li><strong>默认即安全 (Secure by Default)</strong> Caddy 遵循“明智的默认值 (Sane Defaults)”原则。它默认启用最新的 TLS 1.3 协议，使用安全的加密套件，自动启用 HSTS 策略，并默认阻止对 <code>.git</code> 等隐藏文件的访问。你无需成为安全专家，就能获得一个高安全性的站点。</li><li><strong>原生支持 HTTP/3</strong> Caddy 原生支持最新的 HTTP/3 协议（基于 QUIC），可以显著减少延迟，提升移动网络和不稳定网络下的访问速度。</li><li><strong>Go 语言编写，单文件部署</strong> Caddy 是一个编译好的、无任何依赖的二进制文件。部署它就像复制一个文件一样简单，非常适合 Docker、Kubernetes 等容器化环境。</li></ol><h3 id=通用且功能丰富的-caddyfile-模板>通用且功能丰富的 Caddyfile 模板<a hidden class=anchor aria-hidden=true href=#通用且功能丰富的-caddyfile-模板>#</a></h3><p>为了让您快速上手，我准备了一份功能丰富的 Caddyfile 配置模板。它几乎涵盖了个人博客、企业官网、API 服务等场景所需的大部分功能，包括：安全头、性能优化、反向代理、日志轮转等。</p><p>您可以将此作为您项目的起点，按需修改。</p><p>`# &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</p><h1 id=通用且功能丰富的-caddyfile-模板-1>通用且功能丰富的 Caddyfile 模板<a hidden class=anchor aria-hidden=true href=#通用且功能丰富的-caddyfile-模板-1>#</a></h1><h1></h1><h1 id=最后更新-2025-06-25>最后更新: 2025-06-25<a hidden class=anchor aria-hidden=true href=#最后更新-2025-06-25>#</a></h1><h1 id=heading>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<a hidden class=anchor aria-hidden=true href=#heading>#</a></h1><h1></h1><h1 id=全局配置块-global-options-block>全局配置块 (Global Options Block)<a hidden class=anchor aria-hidden=true href=#全局配置块-global-options-block>#</a></h1><p>{
# 默认的日志格式
log {
format console
level INFO
}</p><pre><code># 开启 OCSP Stapling 缓存，提升 TLS 握手性能
ocsp_stapling
</code></pre><p>}</p><h1 id=heading-1>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<a hidden class=anchor aria-hidden=true href=#heading-1>#</a></h1><h1 id=站点一-yourdomaincom-主站点静态网站php网站>站点一: yourdomain.com (主站点/静态网站/PHP网站)<a hidden class=anchor aria-hidden=true href=#站点一-yourdomaincom-主站点静态网站php网站>#</a></h1><h1 id=heading-2>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<a hidden class=anchor aria-hidden=true href=#heading-2>#</a></h1><p>yourdomain.com, <a href=https://www.yourdomain.com>www.yourdomain.com</a> {</p><pre><code># --- 基础配置 ---
# 网站根目录
root * /srv/www.yourdomain.com/public
# 自动将 www.yourdomain.com 重定向到 yourdomain.com
@www host www.yourdomain.com
redir @www https://yourdomain.com{uri}

# --- 性能优化 ---
# 启用 Gzip 和 Zstd 压缩
encode zstd gzip

# 浏览器缓存控制 (Cache-Control)
@multimedia path *.jpg *.jpeg *.png *.gif *.svg *.webp *.mp4
header @multimedia Cache-Control &quot;public, max-age=2592000, immutable&quot;
@static path *.css *.js
header @static Cache-Control &quot;public, max-age=604800&quot;

# --- PHP-FPM 配置 (如果是 PHP 网站，取消此行注释) ---
# php_fastcgi unix//run/php/php8.3-fpm.sock

# --- 文件服务 ---
file_server {
    hide .env .git .user.ini
}

# --- 安全增强 ---
header {
    Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;
    X-Frame-Options &quot;SAMEORIGIN&quot;
    X-XSS-Protection &quot;1; mode=block&quot;
    X-Content-Type-Options &quot;nosniff&quot;
    # Content-Security-Policy &quot;default-src 'self';&quot; # 根据需要配置
    -Server
}

# --- 速率限制 (防止暴力破解) ---
@login {
    path /login
    method POST
}
rate_limit @login {
    window 10s
    burst  5
}

# --- 自定义错误页面 ---
handle_errors {
    rewrite * /error-pages/{http.error.status_code}.html
    file_server
}

# --- 日志记录 ---
log {
    output file /var/log/caddy/yourdomain.com.access.log {
        roll_size     10mb
        roll_keep     5
        roll_keep_for 720h
    }
}
</code></pre><p>}</p><h1 id=heading-3>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<a hidden class=anchor aria-hidden=true href=#heading-3>#</a></h1><h1 id=站点二-apiyourdomaincom-反向代理>站点二: api.yourdomain.com (反向代理)<a hidden class=anchor aria-hidden=true href=#站点二-apiyourdomaincom-反向代理>#</a></h1><h1 id=heading-4>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<a hidden class=anchor aria-hidden=true href=#heading-4>#</a></h1><p>api.yourdomain.com {
reverse_proxy localhost:8081 {
lb_policy least_conn
health_uri /health
health_interval 10s
}
}</p><h1 id=heading-5>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<a hidden class=anchor aria-hidden=true href=#heading-5>#</a></h1><h1 id=站点三-old-domaincom-域名重定向>站点三: old-domain.com (域名重定向)<a hidden class=anchor aria-hidden=true href=#站点三-old-domaincom-域名重定向>#</a></h1><h1 id=heading-6>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;<a hidden class=anchor aria-hidden=true href=#heading-6>#</a></h1><p>old-domain.com, <a href=https://www.old-domain.com>www.old-domain.com</a> {
redir <a href=https://yourdomain.com>https://yourdomain.com</a>{uri} permanent
}`</p><h3 id=如何开始使用>如何开始使用？<a hidden class=anchor aria-hidden=true href=#如何开始使用>#</a></h3><ol><li><p><strong>安装 Caddy</strong>: 访问 Caddy 的<a href=https://caddyserver.com/download>官方下载页面</a>，根据您的操作系统选择最简单的方式安装。</p></li><li><p><strong>创建 Caddyfile</strong>: 将上面的模板保存为一个名为 <code>Caddyfile</code> 的纯文本文件，并根据您的需求进行修改。</p></li><li><p>运行 Caddy（配置在/etc/Caddy)</p><p>Bash</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>caddy run
</span></span></code></pre></td></tr></table></div></div><p>如果您想让它在后台持续运行，可以使用：</p><p>Bash</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>caddy start
</span></span></code></pre></td></tr></table></div></div></li></ol><p>Caddy 会立即开始工作，为您的域名提供服务并自动处理 HTTPS。</p><hr><p>Caddy 的管理命令主要通过其命令行界面（CLI）进行操作，涵盖了从启动到停止、配置验证以及版本查看等多个方面。</p><h3 id=caddy-常用管理命令概览>Caddy 常用管理命令概览<a hidden class=anchor aria-hidden=true href=#caddy-常用管理命令概览>#</a></h3><ul><li><strong>启动 Caddy</strong>:<ul><li><code>caddy run</code>: 在前台运行，常用于开发和调试。</li><li><code>caddy start</code>: 在后台作为守护进程启动，适用于生产环境。</li><li><code>caddy reload</code>: 无需停机即可重新加载配置文件，使更改生效。</li></ul></li><li><strong>停止 Caddy</strong>:<ul><li><code>caddy stop</code>: 停止当前运行的 Caddy 进程。</li></ul></li><li><strong>配置管理</strong>:<ul><li><code>caddy validate --config /path/to/Caddyfile</code>: 检查配置文件的语法是否正确。</li><li><code>caddy adapt --config /path/to/Caddyfile --pretty</code>: 将 Caddyfile 转换为易读的 JSON 格式配置。</li></ul></li><li><strong>信息查询</strong>:<ul><li><code>caddy version</code>: 显示 Caddy 的版本信息。</li><li><code>caddy help</code>: 获取整体帮助信息。</li><li><code>caddy help &lt;command></code>: 获取特定命令的帮助信息。</li></ul></li><li><strong>服务管理 (Systemd)</strong>: 在生产环境中，通常会结合 Systemd 等服务管理工具来控制 Caddy 服务。常用命令包括：<ul><li><code>sudo systemctl start caddy</code>: 启动服务。</li><li><code>sudo systemctl stop caddy</code>: 停止服务。</li><li><code>sudo systemctl restart caddy</code>: 重启服务。</li><li><code>sudo systemctl reload caddy</code>: 重新加载配置。</li><li><code>sudo systemctl enable caddy</code>: 设置开机自启动。</li><li><code>sudo systemctl status caddy</code>: 查看服务状态。</li></ul></li></ul><p>掌握这些命令能让你高效地管理 Caddy 服务器，无论是用于开发测试还是在生产环境中稳定运行。</p><h3 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h3><p>Caddy 以其颠覆性的设计理念，正在改变我们对 Web 服务器的认知。它将曾经繁琐的配置工作，变成了一种简单而愉悦的体验。无论您是想托管一个个人博客，还是部署复杂的微服务架构，Caddy 都是一个值得您认真考虑的、强大而现代的选择。</p><p><strong>给它一个机会，我相信你会爱上它的。</strong></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.l50.top/tags/daily/>Daily</a></li><li><a href=https://blog.l50.top/tags/life/>Life</a></li></ul><nav class=paginav><a class=next href=https://blog.l50.top/posts/techs/%E4%BD%BF%E7%94%A8wireguard%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86/><span class=title>Next »</span><br><span>使用wireguard配置代理</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.l50.top/>木木的小站</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>